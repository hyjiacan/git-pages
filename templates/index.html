<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="generator" content="wet"/>
  <title>首页 - {{$config.name}}</title>
  <t-include file="include/assets.html"/>
  <script src="/static/lib/timeago.js"></script>
</head>
<body>
<div class="container">
  <t-include file="include/header.html"/>
  <table class="table table-bordered">
    <thead class="thead-light">
    <tr>
      <th>用户数量</th>
      <th>仓库数量</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>{{userCount}}</td>
      <td>{{projectCount}}</td>
    </tr>
    </tbody>
  </table>
  <div class="card">
    <div class="card-header">
      <span>最近更新</span>
      <div class="float-right">
        <a href="/projects/">
          所有项目
          <i class="fa fa-chevron-right"></i>
        </a>
      </div>
    </div>
    <div class="card-body">
      <ol class="list-group-flush">
        <t-for on="project of recentList">
          <li class="list-group-item">
            <span class="badge badge-pill badge-primary" datetime="{{project.repository.updated_at}}"></span>
            <a href="/projects/{{project.repository.full_name}}/">{{project.repository.full_name}}</a>
            <span class="text-muted">{{project.repository.description}}</span>
          </li>
        </t-for>
      </ol>
    </div>
  </div>
  <t-include file="./include/footer.html"/>
  <script>
  var items = document.querySelectorAll('span[datetime]')
  items.forEach(function (node) {
    node.title = node.getAttribute('datetime')
  })
  timeago.render(items, 'zh_CN')
  </script>
</div>
</body>
</html>
